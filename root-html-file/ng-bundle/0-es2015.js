(window["webpackJsonpangular-app"]=window["webpackJsonpangular-app"]||[]).push([[0],{DV0l:function(t,e,i){"use strict";i.d(e,"a",function(){return l}),i.d(e,"b",function(){return h});var s=i("8Y7J"),a=(i("jPD8"),i("Xg1U"),i("atuK"),i("iutN"),i("SVse")),n=(i("2uy1"),i("z/SZ")),o=(i("978R"),i("ienR")),r=(i("FE24"),i("s7LF"));i("M3cK"),i("7dAJ"),i("g2TG"),i("8wCY"),i("cUpR"),i("GS7A");var l=s["\u0275crt"]({encapsulation:2,styles:[],data:{}});function d(t){return s["\u0275vid"](0,[(t()(),s["\u0275eld"](0,0,null,null,2,"input",[["class","form-control app-textbox app-dateinput mobile-input"],["placeholder","yyyy-mm-dd"],["role","textbox"],["step","any"],["type","date"]],[[8,"min",0],[8,"max",0],[8,"value",0],[8,"tabIndex",0],[8,"required",0],[8,"disabled",0],[1,"aria-label",0]],[[null,"change"],[null,"focus"],[null,"blur"]],function(t,e,i){var s=!0,a=t.component;return"change"===e&&(s=!1!==a.onDisplayDateChange(i,!0)&&s),"focus"===e&&(a.onDateTimeInputFocus(!0),s=!1!==a.invokeOnFocus(i)&&s),"blur"===e&&(a.onDateTimeInputBlur(),s=!1!==a.invokeOnTouched(i)&&s),s},null,null)),s["\u0275ppd"](1,2),s["\u0275ppd"](2,2)],null,function(t,e){var i=e.component,a=s["\u0275unv"](e,0,0,t(e,1,0,s["\u0275nov"](e.parent,0),i.mindate,"yyyy-MM-dd")),n=s["\u0275unv"](e,0,1,t(e,2,0,s["\u0275nov"](e.parent,0),i.maxdate,"yyyy-MM-dd"));t(e,0,0,a,n,i.nativeDisplayValue,i.tabindex,i.required,i.disabled||i.readonly,i.hint||"Date field")})}function h(t){return s["\u0275vid"](0,[s["\u0275pid"](0,a.f,[s.LOCALE_ID]),s["\u0275qud"](671088640,1,{bsDropdown:0}),s["\u0275qud"](671088640,2,{bsTimePicker:0}),s["\u0275qud"](671088640,3,{bsDatePickerDirective:0}),(t()(),s["\u0275eld"](4,0,null,null,0,"input",[["class","form-control app-textbox app-dateinput display-input"],["focus-target",""],["type","text"]],[[8,"name",0],[8,"tabIndex",0],[8,"value",0],[8,"disabled",0],[8,"autofocus",0],[8,"required",0],[8,"readOnly",0],[1,"placeholder",0],[1,"accesskey",0],[1,"aria-label",0]],[[null,"click"],[null,"focus"],[null,"blur"],[null,"change"],[null,"keydown"]],function(t,e,i){var s=!0,a=t.component;return"click"===e&&(s=!1!==a.toggleDpDropdown(i,!0)&&s),"focus"===e&&(a.onDateTimeInputFocus(),s=!1!==a.invokeOnFocus(i)&&s),"blur"===e&&(s=!1!==a.onInputBlur(i)&&s),"change"===e&&(s=!1!==a.onDisplayDateChange(i)&&s),"keydown"===e&&(s=!1!==a.onDisplayKeydown(i)&&s),s},null,null)),(t()(),s["\u0275eld"](5,0,null,null,2,"span",[["class","input-group-btn"]],null,null,null,null,null)),(t()(),s["\u0275eld"](6,0,null,null,1,"button",[["aria-expanded","false"],["aria-haspopup","true"],["aria-label","Select date"],["class","btn btn-default btn-time"],["type","button"]],[[8,"tabIndex",0],[8,"disabled",0]],[[null,"click"]],function(t,e,i){var s=!0;return"click"===e&&(s=!1!==t.component.toggleDpDropdown(i,!1)&&s),s},null,null)),(t()(),s["\u0275eld"](7,0,null,null,0,"i",[["aria-hidden","true"],["class","app-icon wi wi-calendar"]],null,null,null,null,null)),(t()(),s["\u0275eld"](8,0,null,null,5,"div",[["style","width: 0;display: inline-block;"]],null,null,null,null,null)),(t()(),s["\u0275eld"](9,16777216,null,null,4,"input",[["aria-controls","date"],["aria-label","datepicker dropdownmenu"],["bsDatepicker",""],["class","model-holder"],["placement","bottom right"]],null,[[null,"onShown"],[null,"onHidden"],[null,"bsValueChange"],[null,"change"],[null,"keyup.esc"],[null,"keydown"],[null,"blur"]],function(t,e,i){var a=!0,n=t.component;return"change"===e&&(a=!1!==s["\u0275nov"](t,13).onChange(i)&&a),"keyup.esc"===e&&(a=!1!==s["\u0275nov"](t,13).hide()&&a),"keydown"===e&&(a=!1!==s["\u0275nov"](t,13).onKeydownEvent(i)&&a),"blur"===e&&(a=!1!==s["\u0275nov"](t,13).onBlur()&&a),"onShown"===e&&(a=!1!==n.onDatePickerOpen()&&a),"onHidden"===e&&(a=!1!==n.hideDatepickerDropdown()&&a),"bsValueChange"===e&&(a=!1!==n.onDateChange(i)&&a),a},null,null)),s["\u0275prd"](5120,null,r.n,function(t){return[t]},[o.e]),s["\u0275prd"](5120,null,r.m,function(t){return[t]},[o.e]),s["\u0275did"](12,4931584,[[3,4],["datepicker",4]],0,o.c,[o.a,s.ElementRef,s.Renderer2,s.ViewContainerRef,n.a],{placement:[0,"placement"],container:[1,"container"],isOpen:[2,"isOpen"],bsValue:[3,"bsValue"],bsConfig:[4,"bsConfig"],isDisabled:[5,"isDisabled"],daysDisabled:[6,"daysDisabled"],datesDisabled:[7,"datesDisabled"]},{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"}),s["\u0275did"](13,16384,null,0,o.e,[o.c,o.i,s.Renderer2,s.ElementRef,s.ChangeDetectorRef],null,null),(t()(),s["\u0275and"](16777216,null,null,1,null,d)),s["\u0275did"](15,16384,null,0,a.t,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var i=e.component;t(e,12,0,"bottom right",i.containerTarget||"body",i.isOpen,i.bsDataValue,i._dateOptions,i.disabled||i.readonly,i.excludedDaysToDisable,i.excludedDatesToDisable),t(e,15,0,i.loadNativeDateInput)},function(t,e){var i=e.component;t(e,4,0,i.name,i.tabindex,i.displayValue,i.disabled||i.readonly,i.autofocus,i.required,i.isReadOnly,i.placeholder,i.shortcutkey,i.hint||"Date field"),t(e,6,0,i.tabindex,i.disabled||i.readonly)})}},M3cK:function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return C}),i.d(e,"c",function(){return E}),i.d(e,"d",function(){return P}),i.d(e,"e",function(){return M});var s=i("8Y7J"),a=(i("s7LF"),i("2Vo4")),n=i("AfCQ");let o=(()=>{class t{writeValue(e){return{type:t.WRITE_VALUE,payload:e}}changeHours(e){return{type:t.CHANGE_HOURS,payload:e}}changeMinutes(e){return{type:t.CHANGE_MINUTES,payload:e}}changeSeconds(e){return{type:t.CHANGE_SECONDS,payload:e}}setTime(e){return{type:t.SET_TIME_UNIT,payload:e}}updateControls(e){return{type:t.UPDATE_CONTROLS,payload:e}}}return t.WRITE_VALUE="[timepicker] write value from ng model",t.CHANGE_HOURS="[timepicker] change hours",t.CHANGE_MINUTES="[timepicker] change minutes",t.CHANGE_SECONDS="[timepicker] change seconds",t.SET_TIME_UNIT="[timepicker] set time unit",t.UPDATE_CONTROLS="[timepicker] update controls",t})();function r(t){return!!t&&!(t instanceof Date&&isNaN(t.getHours()))&&("string"!=typeof t||r(new Date(t)))}function l(t,e){return!(t.min&&e<t.min||t.max&&e>t.max)}function d(t){return"number"==typeof t?t:parseInt(t,10)}function h(t,e=!1){const i=d(t);return isNaN(i)||i<0||i>(e?12:24)?NaN:i}function c(t){const e=d(t);return isNaN(e)||e<0||e>60?NaN:e}function u(t){const e=d(t);return isNaN(e)||e<0||e>60?NaN:e}function p(t){return"string"==typeof t?new Date(t):t}function m(t,e){if(!t)return m(b(new Date,0,0,0),e);let i=t.getHours(),s=t.getMinutes(),a=t.getSeconds();return e.hour&&(i+=d(e.hour)),e.minute&&(s+=d(e.minute)),e.seconds&&(a+=d(e.seconds)),b(t,i,s,a)}function v(t,e){let i=h(e.hour);const s=c(e.minute),a=u(e.seconds)||0;return e.isPM&&12!==i&&(i+=12),t?isNaN(i)||isNaN(s)?t:b(t,i,s,a):isNaN(i)||isNaN(s)?t:b(new Date,i,s,a)}function b(t,e,i,s){const a=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e,i,s,t.getMilliseconds());return a.setFullYear(t.getFullYear()),a.setMonth(t.getMonth()),a.setDate(t.getDate()),a}function D(t){const e=t.toString();return e.length>1?e:`0${e}`}function g(t,e){return!isNaN(h(t,e))}function y(t){return!isNaN(c(t))}function f(t){return!isNaN(u(t))}function O(t,e="0",i="0",s){return g(t,s)&&y(e)&&f(i)}function k(t,e){if(t.readonlyInput||t.disabled)return!1;if(e){if("wheel"===e.source&&!t.mousewheel)return!1;if("key"===e.source&&!t.arrowkeys)return!1}return!0}function T(t){const{hourStep:e,minuteStep:i,secondsStep:s,readonlyInput:a,disabled:n,mousewheel:o,arrowkeys:r,showSpinners:l,showMeridian:d,showSeconds:h,meridians:c,min:u,max:p}=t;return{hourStep:e,minuteStep:i,secondsStep:s,readonlyInput:a,disabled:n,mousewheel:o,arrowkeys:r,showSpinners:l,showMeridian:d,showSeconds:h,meridians:c,min:u,max:p}}let E=(()=>{class t{constructor(){this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.showMeridian=!0,this.meridians=["AM","PM"],this.readonlyInput=!1,this.disabled=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showSeconds=!1,this.showMinutes=!0,this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.ariaLabelHours="hours",this.ariaLabelMinutes="minutes",this.ariaLabelSeconds="seconds"}}return t.\u0275prov=Object(s["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t})();const w={value:null,config:new E,controls:{canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0}};function I(t=w,e){switch(e.type){case o.WRITE_VALUE:return Object.assign({},t,{value:e.payload});case o.CHANGE_HOURS:{if(!k(t.config,e.payload)||(s=t.controls,!(i=e.payload).step||i.step>0&&!s.canIncrementHours||i.step<0&&!s.canDecrementHours))return t;const a=m(t.value,{hour:e.payload.step});return!t.config.max&&!t.config.min||l(t.config,a)?Object.assign({},t,{value:a}):t}case o.CHANGE_MINUTES:{if(!k(t.config,e.payload)||!function(t,e){return!(!t.step||t.step>0&&!e.canIncrementMinutes||t.step<0&&!e.canDecrementMinutes)}(e.payload,t.controls))return t;const i=m(t.value,{minute:e.payload.step});return!t.config.max&&!t.config.min||l(t.config,i)?Object.assign({},t,{value:i}):t}case o.CHANGE_SECONDS:{if(!k(t.config,e.payload)||!function(t,e){return!(!t.step||t.step>0&&!e.canIncrementSeconds||t.step<0&&!e.canDecrementSeconds)}(e.payload,t.controls))return t;const i=m(t.value,{seconds:e.payload.step});return!t.config.max&&!t.config.min||l(t.config,i)?Object.assign({},t,{value:i}):t}case o.SET_TIME_UNIT:{if(!k(t.config))return t;const i=v(t.value,e.payload);return Object.assign({},t,{value:i})}case o.UPDATE_CONTROLS:{const i=function(t,e){const{min:i,max:s,hourStep:a,minuteStep:n,secondsStep:o,showSeconds:r}=e,l={canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0};if(!t)return l;if(s){const e=m(t,{hour:a});if(l.canIncrementHours=s>e&&t.getHours()+a<24,!l.canIncrementHours){const e=m(t,{minute:n});l.canIncrementMinutes=r?s>e:s>=e}if(!l.canIncrementMinutes){const e=m(t,{seconds:o});l.canIncrementSeconds=s>=e}t.getHours()<12&&(l.canToggleMeridian=m(t,{hour:12})<s)}if(i){const e=m(t,{hour:-a});if(l.canDecrementHours=i<e,!l.canDecrementHours){const e=m(t,{minute:-n});l.canDecrementMinutes=r?i<e:i<=e}if(!l.canDecrementMinutes){const e=m(t,{seconds:-o});l.canDecrementSeconds=i<=e}t.getHours()>=12&&(l.canToggleMeridian=m(t,{hour:-12})>i)}return l}(t.value,e.payload),s={value:t.value,config:e.payload,controls:i};return t.config.showMeridian!==s.config.showMeridian&&t.value&&(s.value=new Date(t.value)),Object.assign({},t,s)}default:return t}var i,s}class M extends n.b{constructor(){const t=new a.a({type:"[mini-ngrx] dispatcher init"});super(t,I,new n.a(w,t,I))}}Object(s.forwardRef)(()=>C);class C{constructor(t,e,i,a){this._cd=e,this._store=i,this._timepickerActions=a,this.isValid=new s.EventEmitter,this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1,this.onChange=Function.prototype,this.onTouched=Function.prototype,Object.assign(this,t),this.timepickerSub=i.select(t=>t.value).subscribe(t=>{this._renderTime(t),this.onChange(t),this._store.dispatch(this._timepickerActions.updateControls(T(this)))}),i.select(t=>t.controls).subscribe(t=>{this.isValid.emit(O(this.hours,this.minutes,this.seconds,this.isPM())),Object.assign(this,t),e.markForCheck()})}get isSpinnersVisible(){return this.showSpinners&&!this.readonlyInput}get isEditable(){return!(this.readonlyInput||this.disabled)}resetValidation(){this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1}isPM(){return this.showMeridian&&this.meridian===this.meridians[1]}prevDef(t){t.preventDefault()}wheelSign(t){return-1*Math.sign(t.deltaY)}ngOnChanges(t){this._store.dispatch(this._timepickerActions.updateControls(T(this)))}changeHours(t,e=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeHours({step:t,source:e}))}changeMinutes(t,e=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeMinutes({step:t,source:e}))}changeSeconds(t,e=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeSeconds({step:t,source:e}))}updateHours(t){if(this.resetValidation(),this.hours=t,!g(this.hours,this.isPM())||!this.isValidLimit())return this.invalidHours=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateMinutes(t){if(this.resetValidation(),this.minutes=t,!y(this.minutes)||!this.isValidLimit())return this.invalidMinutes=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateSeconds(t){if(this.resetValidation(),this.seconds=t,!f(this.seconds)||!this.isValidLimit())return this.invalidSeconds=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}isValidLimit(){return function(t,e,i){const s=v(new Date,t);return!(e&&s>e||i&&s<i)}({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()},this.max,this.min)}_updateTime(){if(!O(this.hours,this.showMinutes?this.minutes:void 0,this.showSeconds?this.seconds:void 0,this.isPM()))return this.isValid.emit(!1),void this.onChange(null);this._store.dispatch(this._timepickerActions.setTime({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()}))}toggleMeridian(){this.showMeridian&&this.isEditable&&this._store.dispatch(this._timepickerActions.changeHours({step:12,source:""}))}writeValue(t){r(t)?this._store.dispatch(this._timepickerActions.writeValue(p(t))):null==t&&this._store.dispatch(this._timepickerActions.writeValue(null))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._cd.markForCheck()}ngOnDestroy(){this.timepickerSub.unsubscribe()}_renderTime(t){if(!r(t))return this.hours="",this.minutes="",this.seconds="",void(this.meridian=this.meridians[0]);const e=p(t);let i=e.getHours();this.showMeridian&&(this.meridian=this.meridians[i>=12?1:0],i%=12,0===i&&(i=12)),this.hours=D(i),this.minutes=D(e.getMinutes()),this.seconds=D(e.getUTCSeconds())}}class P{static forRoot(){return{ngModule:P,providers:[o,M]}}}},jPD8:function(t,e,i){"use strict";i.d(e,"a",function(){return m}),i.d(e,"b",function(){return D}),i.d(e,"c",function(){return O}),i.d(e,"d",function(){return f}),i.d(e,"e",function(){return h});var s=i("SVse"),a=i("ienR"),n=i("M3cK"),o=i("g2TG"),r=i("8wCY"),l=i("rUxc");const d=["January","February","March","April","May","June","July","August","September","October","November","December"];function h(t){return Object.assign(new n.c,{meridians:Object(s.J)(t.getSelectedLocale(),s.h.Format,s.G.Abbreviated)})}class c extends l.a{constructor(t,e){super(t,e),this.isReadOnly=!1,this._dateOptions=new a.a,this.datePipe=this.inj.get(o.X),this.i18nService=this.inj.get(r.i),this.selectedLocale=this.i18nService.getSelectedLocale(),this._dateOptions.todayPosition="left",this._dateOptions.clearPosition="right",this.meridians=Object(s.J)(this.selectedLocale,s.h.Format,s.G.Abbreviated),this.loadNativeDateInput=Object(r.Qb)()&&!this.showcustompicker}isDropDownDisplayEnabledOnInput(t){return"default"===t}isDataEntryModeEnabledOnInput(t){return"default"===t}showValidation(t,e,i,s){if(i)return console.warn("min max date validation failed ",s),$(t.target).val(e)}resetDisplayInput(){$(this.nativeElement).find(".display-input").val("")}validate(t){return this.invalidDateTimeFormat?{invalidDateTimeFormat:{valid:!1}}:!_.isUndefined(this.dateNotInRange)&&this.dateNotInRange?{dateNotInRange:{valid:!1}}:!_.isUndefined(this.timeNotInRange)&&this.timeNotInRange?{timeNotInRange:{valid:!1}}:this.show&&this.required?t.value?null:{required:!0}:(this.validateType="",null)}formatValidation(t,e,i){const s=this.datepattern||this.timepattern,a=Object(r.nb)(this.datePipe,t,s);if(e=e.trim())if("timestamp"===s){if(!_.isNaN(e)&&_.parseInt(e)!==a)return this.invalidDateTimeFormat=!0,this.validateType="incorrectformat",this.invokeOnChange(this.datavalue,void 0,!1),!1}else if(i&&(e=Object(r.nb)(this.datePipe,e,s)),e!==a)return this.invalidDateTimeFormat=!0,this.validateType="incorrectformat",this.invokeOnChange(this.datavalue,void 0,!1),!1;return!0}minDateMaxDateValidationOnInput(t,e,i,s){if(t){const a=t;t=moment(t).startOf("day").toDate();const n=moment(Object(r.jb)(this.mindate)).startOf("day").toDate(),o=moment(Object(r.jb)(this.maxdate)).startOf("day").toDate();if(this.mindate&&t<n){const t=`${this.appLocale.LABEL_MINDATE_VALIDATION_MESSAGE} ${this.mindate}.`;return this.dateNotInRange=!0,this.validateType="mindate",this.invokeOnChange(this.datavalue,void 0,!1),this.showValidation(e,i,s,t)}if(this.maxdate&&t>o){const t=`${this.appLocale.LABEL_MAXDATE_VALIDATION_MESSAGE} ${this.maxdate}.`;return this.dateNotInRange=!0,this.validateType="maxdate",this.invokeOnChange(this.datavalue,void 0,!1),this.showValidation(e,i,s,t)}if(this.excludedates){let t;if(t=Object(r.Xb)(this.excludedates)?_.split(this.excludedates,","):this.excludedates,t=t.map(t=>Object(r.nb)(this.datePipe,t,this.datepattern)),t.indexOf(Object(r.nb)(this.datePipe,a,this.datepattern))>-1)return this.dateNotInRange=!0,this.validateType="excludedates",void this.invokeOnChange(this.datavalue,void 0,!1)}if(this.excludedays){const t=_.split(this.excludedays,","),e=_.get(a,"getDay")?a.getDay():a;if(t.indexOf(e.toString())>-1)return this.dateNotInRange=!0,this.validateType="excludedays",void this.invokeOnChange(this.datavalue,void 0,!1)}}s||(this.dateNotInRange=!1,this.invokeOnChange(this.datavalue,void 0,!1))}hightlightToday(){const t=(new Date).getDate().toString();_.filter($(`span:contains(${t})`).not(".is-other-month"),e=>{$(e).text()===t&&$(e).addClass("current-date text-info")})}isOtheryear(t){return 0===t.getMonth()&&11===this.activeDate.getMonth()||11===t.getMonth()&&0===this.activeDate.getMonth()}setActiveDateFocus(t,e){const i=this.activeDate.getMonth();e||(t.getMonth()<i?this.isOtheryear(t)?this.goToOtherMonthOryear("next","days"):this.goToOtherMonthOryear("previous","days"):t.getMonth()>i&&(this.isOtheryear(t)?this.goToOtherMonthOryear("previous","days"):this.goToOtherMonthOryear("next","days"))),setTimeout(()=>{t.getMonth()===(new Date).getMonth()&&t.getFullYear()===(new Date).getFullYear()&&this.hightlightToday();const e=t.getDate().toString();_.filter($(`span:contains(${e})`).not(".is-other-month"),i=>{$(i).text()===e&&($(i).focus(),this.activeDate=t)})})}goToOtherMonthOryear(t,e){const i=$(`.bs-datepicker-head .${t}`);i.attr("disabled")||(i.trigger("click"),"days"===e?this.loadDays():"month"===e?this.loadMonths():"year"===e&&this.loadYears())}addDatepickerMouseEvents(){const t=$(".bs-datepicker-head");t.find(".previous").click(t=>{t.originalEvent&&this.setFocusForDate(-1)}),t.find(".next").click(t=>{t.originalEvent&&this.setFocusForDate(1)}),t.find(".current").click(t=>{t.originalEvent&&this.setFocusForCurrentMonthOryear()}),$(".bs-datepicker-body, .bs-datepicker-action-buttons").click(t=>{t.stopPropagation(),t.originalEvent&&this.setFocusForMonthOrDay()})}setFocusForMonthOrDay(){const t=$(".bs-datepicker-head .current").first().text(),e=$(".bs-datepicker-body");if(e.find("table.months").length>0){_.parseInt(t)!==this.activeDate.getFullYear()&&this.loadMonths();const e=new Date(_.parseInt(t),this.activeDate.getMonth(),this.activeDate.getDate());this.setActiveMonthFocus(e,!0)}else if(e.find("table.days").length>0){const e=d.indexOf(t);e!==this.activeDate.getMonth()&&this.loadDays();const i=new Date(this.activeDate.getFullYear(),e,1);this.setActiveDateFocus(i,!0)}}setFocusForCurrentMonthOryear(){const t=$(".bs-datepicker-body");t.find("table.months").length>0?(this.loadMonths(),this.setActiveMonthFocus(this.activeDate,!0)):t.find("table.years").length>0&&(this.loadYears(),this.setActiveYearFocus(this.activeDate,!0))}setFocusForDate(t){const e=$(".bs-datepicker-body");if(e.find("table.months").length>0){this.loadMonths();const e=new Date(this.activeDate.getFullYear()+t,0,this.activeDate.getDate());this.setActiveMonthFocus(e,!0)}else if(e.find("table.years").length>0){this.loadYears();const t=e.find("table.years span").first().text(),i=new Date(_.parseInt(t),this.activeDate.getMonth(),this.activeDate.getDate());this.setActiveYearFocus(i,!0)}else if(e.find("table.days").length>0){this.loadDays();const e=new Date(this.activeDate.getFullYear(),this.activeDate.getMonth()+t,1);this.setActiveDateFocus(e,!0)}}addDatepickerKeyboardEvents(t,e){this.keyEventPluginInstance=t.keyEventPlugin.constructor,this.elementScope=t;const i=document.querySelector(`.${t.dateContainerCls}`);Object(r.oc)(i,"tabindex","0"),i.onkeydown=t=>{const i=this.keyEventPluginInstance.getEventFullKey(t);if("shift.tab"===i||"escape"===i||"tab"===i&&!e){this.elementScope.hideDatepickerDropdown();const t=this.elementScope.nativeElement.querySelector(".display-input");setTimeout(()=>t.focus())}"tab"===i&&e&&(this.bsDatePickerDirective.hide(),this.elementScope.toggleTimePicker(!0))},this.loadDays(),this.setActiveDateFocus(this.activeDate)}loadDays(){setTimeout(()=>{$(".bs-datepicker-body").attr("tabindex","0"),$("[bsdatepickerdaydecorator]").not(".is-other-month").attr("tabindex","0"),this.addKeyBoardEventsForDays(),this.addDatepickerMouseEvents()})}addKeyBoardEventsForDays(){$(".bs-datepicker-body").keydown(t=>{const e=this.keyEventPluginInstance.getEventFullKey(t);let i;if("arrowdown"===e)t.preventDefault(),i=moment(this.activeDate).add(7,"days").toDate(),this.setActiveDateFocus(i);else if("arrowup"===e)t.preventDefault(),i=moment(this.activeDate).add(-7,"days").toDate(),this.setActiveDateFocus(i);else if("arrowleft"===e)i=moment(this.activeDate).add(-1,"days").toDate(),this.setActiveDateFocus(i);else if("arrowright"===e)i=moment(this.activeDate).add(1,"days").toDate(),this.setActiveDateFocus(i);else if("pageup"===e)t.preventDefault(),i=moment(this.activeDate).add(-1,"month").toDate(),this.setActiveDateFocus(i);else if("pagedown"===e)t.preventDefault(),i=moment(this.activeDate).add(1,"month").toDate(),this.setActiveDateFocus(i);else if("control.arrowup"===e)$(".bs-datepicker-head .current").first().click(),this.loadMonths(),this.setActiveMonthFocus(this.activeDate);else if("enter"===e){if($(document.activeElement).hasClass("disabled"))return;$(document.activeElement).click(),this.elementScope.hideDatepickerDropdown();const t=this.elementScope.nativeElement.querySelector(".display-input");setTimeout(()=>t.focus())}})}loadMonths(){setTimeout(()=>{const t=$(".bs-datepicker-body");t.attr("tabindex","0"),t.find("table.months span").attr("tabindex","0"),this.addKeyBoardEventsForMonths(),this.addDatepickerMouseEvents()})}addKeyBoardEventsForMonths(){$(".bs-datepicker-body").keydown(t=>{const e=this.keyEventPluginInstance.getEventFullKey(t);let i;if("arrowdown"===e)t.preventDefault(),i=moment(this.activeDate).add(3,"month").toDate(),this.setActiveMonthFocus(i);else if("arrowup"===e)t.preventDefault(),i=moment(this.activeDate).add(-3,"month").toDate(),this.setActiveMonthFocus(i);else if("arrowleft"===e)i=moment(this.activeDate).add(-1,"month").toDate(),this.setActiveMonthFocus(i);else if("arrowright"===e)i=moment(this.activeDate).add(1,"month").toDate(),this.setActiveMonthFocus(i);else if("control.arrowup"===e)$(".bs-datepicker-head .current").first().click(),this.loadYears(),this.setActiveYearFocus(this.activeDate);else if("control.arrowdown"===e||"enter"===e){if($(document.activeElement).parent().hasClass("disabled"))return;$(document.activeElement).click(),this.loadDays();const t=new Date(this.activeDate.getFullYear(),this.activeDate.getMonth(),1);this.setActiveDateFocus(t)}})}loadYears(){setTimeout(()=>{const t=$(".bs-datepicker-body");t.attr("tabindex","0"),t.find("table.years span").attr("tabindex","0"),this.addKeyBoardEventsForYears(),this.addDatepickerMouseEvents()})}setActiveMonthFocus(t,e){const i=d[t.getMonth()];e||(t.getFullYear()<this.activeDate.getFullYear()?this.goToOtherMonthOryear("previous","month"):t.getFullYear()>this.activeDate.getFullYear()&&this.goToOtherMonthOryear("next","month")),setTimeout(()=>{$(`.bs-datepicker-body table.months span:contains(${i})`).focus(),this.activeDate=t})}addKeyBoardEventsForYears(){$(".bs-datepicker-body").keydown(t=>{const e=this.keyEventPluginInstance.getEventFullKey(t);let i;if("arrowdown"===e)t.preventDefault(),i=moment(this.activeDate).add(4,"year").toDate(),this.setActiveYearFocus(i);else if("arrowup"===e)t.preventDefault(),i=moment(this.activeDate).add(-4,"year").toDate(),this.setActiveYearFocus(i);else if("arrowleft"===e)i=moment(this.activeDate).add(-1,"year").toDate(),this.setActiveYearFocus(i);else if("arrowright"===e)i=moment(this.activeDate).add(1,"year").toDate(),this.setActiveYearFocus(i);else if("control.arrowdown"===e||"enter"===e){if($(document.activeElement).parent().hasClass("disabled"))return;$(document.activeElement).click(),this.loadMonths(),this.setActiveMonthFocus(this.activeDate)}})}setActiveYearFocus(t,e){const i=t.getFullYear(),s=$(".bs-datepicker-body table.years span"),a=s.first().text(),n=s.last().text();e||(t.getFullYear()<_.parseInt(a)?this.goToOtherMonthOryear("previous","year"):t.getFullYear()>_.parseInt(n)&&this.goToOtherMonthOryear("next","year")),setTimeout(()=>{$(`.bs-datepicker-body table.years span:contains(${i})`).focus(),this.activeDate=t})}focusTimePickerPopover(t){this.keyEventPluginInstance=t.keyEventPlugin.constructor,this.elementScope=t,this.elementScope.ngZone.runOutsideAngular(()=>{setTimeout(()=>{$("timepicker .form-group").first().find("> input.form-control").focus()})})}bindTimePickerKeyboardEvents(){setTimeout(()=>{const t=$("body").find("> bs-dropdown-container timepicker");t.attr("tabindex",0),this.addEventsOnTimePicker(t)})}focusOnInputEl(){$(this.nativeElement).closest(".caption-floating").length>0&&setTimeout(()=>{$(this.nativeElement).find(".app-textbox").focus()},100)}isValidDate(t){return t&&t instanceof Date&&!isNaN(t.getTime())}timeFormatValidation(){const t=$(this.nativeElement).find("input").val(),e=Object(r.ob)(t,{meridians:this.meridians,pattern:this.datepattern});this.formatValidation(e,t)&&(this.invalidDateTimeFormat=!1,this.invokeOnChange(this.datavalue,void 0,!1))}updateTimeValue(t,e){t.length<2?setTimeout(()=>{"minutes"===e?this.bsTimePicker.updateMinutes("00"):this.bsTimePicker.updateSeconds("00")},500):"minutes"===e?this.bsTimePicker.updateMinutes("00"):this.bsTimePicker.updateSeconds("00")}addEventsOnTimePicker(t){const e=t.find(".bs-timepicker-field");e.first().on("keyup",t=>{const i=t.target.value;_.forEach(e,(e,s)=>{t.target!==e&&""===e.value&&i.length&&this.updateTimeValue(i,1===s?"minutes":"seconds")})}),this.removeKeyupListener=()=>{e.first().off("keyup")},t.on("keydown",t=>{const e=$(t.target),i=e.parent(),s=this.elementScope,a=this.keyEventPluginInstance.getEventFullKey(t);let n,o;if("escape"===a&&s.hideTimepickerDropdown(),e.hasClass("bs-timepicker-field")){if(i.is(":first-child")?"shift.tab"!==a&&"enter"!==a&&"escape"!==a||(s.setIsTimeOpen(!1),this.focus(),n=!0,o=!0):i.is(":last-child")||i.next().next().find("button.disabled").length?"tab"!==a&&"escape"!==a&&"enter"!==a||(s.setIsTimeOpen(!1),this.focus(),n=!0,o=!0):"enter"!==a&&"escape"!==a||(s.setIsTimeOpen(!1),this.focus(),n=!0,o=!0),n&&t.stopPropagation(),o&&t.preventDefault(),s.mintime&&s.maxtime&&!this.isValidDate(s.bsTimeValue)&&("arrowdown"===a?s.bsTimeValue=s.maxTime:"arrowup"===a&&(s.bsTimeValue=s.minTime)),"tab"===a){this.invalidDateTimeFormat=!1,this.invokeOnChange(this.datavalue,void 0,!1);const t=this.datepattern||this.timepattern;Object(r.nb)(s.datePipe,s.bsTimeValue,t)===s.displayValue&&$(this.nativeElement).find(".display-input").val(s.displayValue)}"arrowdown"!==a&&"arrowup"!==a||this.timeFormatValidation()}else e.hasClass("btn-default")&&("tab"!==a&&"escape"!==a||(s.setIsTimeOpen(!1),this.focus()))}),t.find("a").on("click",t=>{const e=this.elementScope,i=$(t.target);e.mintime&&e.maxtime&&!this.isValidDate(e.bsTimeValue)&&(i.find("span").hasClass("bs-chevron-down")?e.bsTimeValue=e.maxTime:i.find("span").hasClass("bs-chevron-up")&&(e.bsTimeValue=e.minTime)),this.timeFormatValidation()})}updateFormat(t){"datepattern"===t?(this._dateOptions.dateInputFormat=this.datepattern,this.showseconds=_.includes(this.datepattern,"s"),this.ismeridian=_.includes(this.datepattern,"h")):"timepattern"===t&&(this.showseconds=_.includes(this.timepattern,"s"),this.ismeridian=_.includes(this.timepattern,"h"))}getMobileInput(){return this.nativeElement.querySelector(".mobile-input")}onDateTimeInputBlur(){let t=this.getMobileInput();if(t&&!Object(r.xb)()){let e=this.nativeElement.children;for(let t=0;t<e.length;t++)e[t].classList.remove("add-opacity");t.classList.remove("remove-opacity");let i=this.nativeElement.getElementsByTagName("*");for(let t=0;t<i.length;t++)i[t].setAttribute("tabindex",this.tabindex);t.removeAttribute("tabindex")}}onDateTimeInputFocus(t=!1){if(!this.loadNativeDateInput)return;let e=this.getMobileInput();if(!t||Object(r.xb)())e&&(e.focus(),e.click());else{let t=this.nativeElement.children;for(let e=0;e<t.length;e++)t[e].classList.add("add-opacity");e.classList.add("remove-opacity");let i=this.nativeElement.getElementsByTagName("*");for(let e=0;e<i.length;e++)i[e].setAttribute("tabindex","-1");e.setAttribute("tabindex",this.tabindex)}}onPropertyChange(t,e,i){"tabindex"!==t&&("required"!==t?"datepattern"===t?this.updateFormat(t):"showweeks"===t?this._dateOptions.showWeekNumbers=e:"mindate"===t?(this._dateOptions.minDate="CURRENT_DATE"===e?this.mindate=new Date:Object(r.jb)(e),this.minDateMaxDateValidationOnInput(this.datavalue)):"maxdate"===t?(this._dateOptions.maxDate="CURRENT_DATE"===e?this.maxdate=new Date:Object(r.jb)(e),this.minDateMaxDateValidationOnInput(this.datavalue)):"excludedates"===t||"excludedays"===t?(this.excludedays&&(this.excludedDaysToDisable=_.split(this.excludedays,",").map(t=>+t)),this.excludedates&&(this.excludedDatesToDisable=this.excludedates,Object(r.Xb)(this.excludedates)&&(this.excludedDatesToDisable=_.split(this.excludedates,",")),this.excludedDatesToDisable=this.excludedDatesToDisable.map(t=>Object(r.jb)(t))),this.minDateMaxDateValidationOnInput(this.datavalue)):"selectfromothermonth"===t?this._dateOptions.selectFromOtherMonth=e:"todaybutton"===t?this._dateOptions.showTodayButton=e:"clearbutton"===t?this._dateOptions.showClearButton=e:"todaybuttonlabel"===t?this._dateOptions.todayButtonLabel=this.i18nService.getLocalizedMessage(e)||e:"clearbuttonlabel"===t?this._dateOptions.clearButtonLabel=this.i18nService.getLocalizedMessage(e)||e:"showcustompicker"===t?this.loadNativeDateInput=Object(r.Qb)()&&!this.showcustompicker:"adaptiveposition"===t?this._dateOptions.adaptivePosition=e:super.onPropertyChange(t,e,i):this._onChange(this.datavalue))}ngAfterViewInit(){super.ngAfterViewInit(),this.containerTarget=Object(o.mb)(this.nativeElement),this.isReadOnly="undefined"!=this.dataentrymode&&!this.isDataEntryModeEnabledOnInput(this.dataentrymode)}ngOnDestroy(){this.dateOnShowSubscription&&this.dateOnShowSubscription.unsubscribe(),super.ngOnDestroy()}}const u=new Map([["autofocus",o.C],["class",o.E],["dataentrymode",Object.assign({value:"default"},o.E)],["datavaluesource",o.B],["datavalue",o.E],["datepattern",o.E],["disabled",o.C],["excludedays",o.E],["excludedates",o.E],["hint",o.E],["maxdate",o.E],["mindate",o.E],["name",o.E],["outputformat",Object.assign({value:"yyyy-MM-dd"},o.E)],["placeholder",Object.assign({value:"Select Date"},o.E)],["readonly",o.C],["required",o.C],["shortcutkey",o.E],["show",Object.assign({value:!0},o.C)],["showdropdownon",Object.assign({value:"default"},o.E)],["showbuttonbar",Object.assign({value:!0},o.C)],["showcustompicker",Object.assign({value:!1},o.C)],["showindevice",Object.assign({displayType:"inline-block",value:"all"},o.E)],["showweeks",Object.assign({value:!1},o.C)],["tabindex",Object.assign({value:0},o.D)],["selectfromothermonth",Object.assign({value:!0},o.C)],["todaybutton",Object.assign({value:!0},o.C)],["clearbutton",Object.assign({value:!0},o.C)],["adaptiveposition",Object.assign({value:!1},o.C)],["todaybuttonlabel",Object.assign({value:"LABEL_TODAY_DATE"},o.E)],["clearbuttonlabel",Object.assign({value:"LABEL_CLEAR_DATE"},o.E)]]),p={widgetType:"wm-date",hostClass:"app-date input-group"};let m=(()=>{class t extends c{constructor(t,e,i,s){super(t,p),this.cdRef=e,this.appDefaults=i,this.isOpen=!1,this.isEnterPressedOnDateInput=!1,Object(o.Ub)(this.nativeElement,this),this.keyEventPlugin=s[1],this.dateContainerCls=`app-date-${this.widgetId}`,this._dateOptions.containerClass=`app-date ${this.dateContainerCls}`,this._dateOptions.showWeekNumbers=!1,this._bsDefaultLoadCheck=!0,this.datepattern=this.appDefaults.dateFormat||Object(r.kb)(r.B.DATE),this.updateFormat("datepattern")}get timestamp(){return this.bsDataValue?this.bsDataValue.valueOf():void 0}get dateInputFormat(){return this._dateOptions.dateInputFormat||"yyyy-MM-dd"}get displayValue(){return Object(r.nb)(this.datePipe,this.bsDataValue,this.dateInputFormat)||""}get nativeDisplayValue(){return Object(r.nb)(this.datePipe,this.bsDataValue,"yyyy-MM-dd")||""}get datavalue(){return Object(r.nb)(this.datePipe,this.bsDataValue,this.outputformat)||""}set datavalue(t){this.bsDataValue="CURRENT_DATE"===t?new Date:t?Object(r.jb)(t,{isNativePicker:this.loadNativeDateInput}):void 0,this.invokeOnChange(this.datavalue,void 0,!0),this.cdRef.detectChanges()}onDisplayDateChange(t,e=!1){if(this.isEnterPressedOnDateInput)return void(this.isEnterPressedOnDateInput=!1);const i=Object(r.jb)(t.target.value,{pattern:this.datepattern,isNativePicker:e});this.formatValidation(i,t.target.value,e)&&(e&&this.minDateMaxDateValidationOnInput(i,t,this.displayValue,e)||this.setDataValue(i))}setDataValue(t){this.invalidDateTimeFormat=!1,this.minDateMaxDateValidationOnInput(t),Object(r.nb)(this.datePipe,t,this.dateInputFormat)===this.displayValue&&$(this.nativeElement).find(".display-input").val(this.displayValue),this.bsDataValue=t||void 0,this.invokeOnChange(this.datavalue,{},!0)}onDatePickerOpen(){this.isOpen=!0,this.activeDate=this.bsDataValue?this.bsDataValue:new Date,this.bsDataValue||this.hightlightToday(),this.$element.find(".model-holder").width("1px"),this.addDatepickerKeyboardEvents(this,!1),Object(r.R)($("bs-datepicker-container"),this.nativeElement,this.bsDatePickerDirective._datepicker),Object(r.S)($("bs-datepicker-container"),this.nativeElement,this.bsDatePickerDirective._datepicker)}onInputBlur(t){$(t.relatedTarget).hasClass("current-date")||(this.invokeOnTouched(),this.invokeEventCallback("blur",{$event:t}))}hideDatepickerDropdown(){this.invokeOnTouched(),this.isOpen=!1,this.isEnterPressedOnDateInput=!1,this.deregisterEventListener&&this.deregisterEventListener()}handleEvent(t,e,i,s){_.includes(["blur","focus","change","click"],e)||super.handleEvent(t,e,i,s)}toggleDpDropdown(t,e=!1){this.loadNativeDateInput?e||this.onDateTimeInputFocus():("click"===t.type&&(this.invokeEventCallback("click",{$event:t}),this.focusOnInputEl()),t.target&&$(t.target).is("input")&&!this.isDropDownDisplayEnabledOnInput(this.showdropdownon)?t.stopPropagation():(this.bsDatePickerDirective.toggle(),this.addBodyClickListener(this.bsDatePickerDirective.isOpen)))}addBodyClickListener(t){if(!t)return;const e=document.querySelector("body");setTimeout(()=>{const t=e.querySelector(`.${this.dateContainerCls}`);this.deregisterEventListener=Object(r.P)(e,t,this.nativeElement,"click",this.isDropDownDisplayEnabledOnInput(this.showdropdownon),()=>{this.isOpen=!1},0,!0)},350)}onDisplayKeydown(t){if(this.isDropDownDisplayEnabledOnInput(this.showdropdownon)){t.stopPropagation();const e=this.keyEventPlugin.constructor.getEventFullKey(t);if("enter"===e||"arrowdown"===e){const e=Object(r.jb)(t.target.value,{pattern:this.datepattern});t.preventDefault();const i=Object(r.nb)(this.datePipe,e,this.dateInputFormat),s=t.target.value.trim();s&&"timestamp"===this.datepattern?_.isNaN(s)||_.parseInt(s)===i||(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,t,!1)):s&&s!==i?(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,t,!1)):(this.invalidDateTimeFormat=!1,this.isEnterPressedOnDateInput=!0,this.bsDatePickerDirective.bsValue=t.target.value?e:""),this.toggleDpDropdown(t)}else this.hideDatepickerDropdown()}else this.hideDatepickerDropdown()}onDateChange(t){if(this._bsDefaultLoadCheck)return void(this._bsDefaultLoadCheck=!1);const e=this.nativeElement.querySelector(".display-input");this.isOpen&&setTimeout(()=>e.focus()),this.setDataValue(t)}}return t.initializeProps=(Object(o.Rb)("wm-date",u),void Object(o.Sb)(r.B.DATE,new Map(u))),t})();const v=new Map([["autofocus",o.C],["class",o.E],["dataentrymode",Object.assign({value:"default"},o.E)],["datavaluesource",o.B],["datavalue",o.E],["datepattern",o.E],["disabled",o.C],["excludedays",o.E],["excludedates",o.E],["hint",o.E],["hourstep",Object.assign({value:1},o.D)],["maxdate",o.E],["mindate",o.E],["minutestep",Object.assign({value:15},o.D)],["name",o.E],["outputformat",Object.assign({value:"timestamp"},o.E)],["placeholder",Object.assign({value:"Select date time"},o.E)],["readonly",o.C],["required",o.C],["secondsstep",Object.assign({value:1},o.D)],["shortcutkey",o.E],["show",Object.assign({value:!0},o.C)],["showdropdownon",Object.assign({value:"default"},o.E)],["showbuttonbar",o.C],["showcustompicker",Object.assign({value:!1},o.C)],["showindevice",Object.assign({displayType:"inline-block",value:"all"},o.E)],["showweeks",o.C],["tabindex",Object.assign({value:0},o.D)],["timestamp",o.E],["selectfromothermonth",Object.assign({value:!0},o.C)],["todaybutton",Object.assign({value:!0},o.C)],["clearbutton",Object.assign({value:!0},o.C)],["adaptiveposition",Object.assign({value:!1},o.C)],["todaybuttonlabel",Object.assign({value:"LABEL_TODAY_DATE"},o.E)],["clearbuttonlabel",Object.assign({value:"LABEL_CLEAR_DATE"},o.E)]]),b={widgetType:"wm-datetime",hostClass:"app-datetime input-group"};let D=(()=>{class t extends c{constructor(t,e,i,s,a,n){super(t,b),this.ngZone=e,this.cdRef=i,this.appDefaults=s,this.isEnterPressedOnDateInput=!1,this.isTimeOpen=!1,this.isDateOpen=!1,this.isCurrentDate=!1,this._debouncedOnChange=_.debounce(this.invokeOnChange,10),this.registerDestroyListener(()=>this.clearTimeInterval()),Object(o.Ub)(this.nativeElement,this),this.app=a,this.keyEventPlugin=n[1],this.dateContainerCls=`app-date-${this.widgetId}`,this._dateOptions.containerClass=`app-date ${this.dateContainerCls}`,this._dateOptions.showWeekNumbers=!1,this.datepattern=this.appDefaults.dateTimeFormat||Object(r.kb)(r.B.DATETIME),this.updateFormat("datepattern")}get timestamp(){return this.proxyModel?this.proxyModel.valueOf():void 0}get dateInputFormat(){return this._dateOptions.dateInputFormat||"yyyy-MM-ddTHH:mm:ss"}get displayValue(){return Object(r.nb)(this.datePipe,this.proxyModel,this.dateInputFormat)||""}get nativeDisplayValue(){return Object(r.nb)(this.datePipe,this.proxyModel,"yyyy-MM-ddTHH:mm:ss")||""}get datavalue(){return this.isCurrentDate&&!this.proxyModel?"CURRENT_DATE":Object(r.nb)(this.datePipe,this.proxyModel,this.outputformat)}set datavalue(t){"CURRENT_DATE"===t?(this.isCurrentDate=!0,this.setTimeInterval()):(this.proxyModel=t?Object(r.jb)(t,{isNativePicker:this.loadNativeDateInput}):void 0,this.clearTimeInterval(),this.isCurrentDate=!1),this.bsTimeValue=this.bsDateValue=this.proxyModel,this.cdRef.detectChanges()}setTimeInterval(){this.timeinterval||(this.timeinterval=setInterval(()=>{const t=new Date;this.onModelUpdate(t)},1e3))}clearTimeInterval(){this.timeinterval&&(clearInterval(this.timeinterval),this.timeinterval=null)}toggleTimePicker(t,e){this.loadNativeDateInput?this.onDateTimeInputFocus():(this.isTimeOpen=t,e&&"click"===e.type&&this.invokeEventCallback("click",{$event:e}),this.addTimepickerClickListener(this.isTimeOpen))}addTimepickerClickListener(t){if(!t)return;const e=document.querySelector("body");setTimeout(()=>{const t=$(e).find(">bs-dropdown-container .dropdown-menu").get(0);this.deregisterTimepickeEventListener=Object(r.P)(e,t,this.nativeElement,"click",this.isDropDownDisplayEnabledOnInput(this.showdropdownon),()=>{this.toggleTimePicker(!1)},0,!0)},350)}setIsTimeOpen(t){this.isTimeOpen=t}hideTimepickerDropdown(){this.invokeOnTouched(),this.toggleTimePicker(!1),this.deregisterTimepickeEventListener&&this.deregisterTimepickeEventListener();const t=$(this.nativeElement).closest(".app-composite-widget.caption-floating");t.length>0&&this.app.notify("captionPositionAnimate",{displayVal:this.displayValue,nativeEl:t})}onTimepickerOpen(){const t=document.querySelectorAll("timepicker");_.forEach(t,t=>{Object(r.O)(t.parentElement,"app-datetime",!0)}),this.bsDatePickerDirective.hide(),this.focusTimePickerPopover(this),this.bindTimePickerKeyboardEvents(),Object(r.R)($("bs-dropdown-container"),this.nativeElement,this.bsDropdown._dropdown,$("bs-dropdown-container .dropdown-menu")),Object(r.S)($("bs-dropdown-container"),this.nativeElement,this.bsDropdown._dropdown,$("bs-dropdown-container .dropdown-menu"))}onDatePickerOpen(){this.isDateOpen=!this.isDateOpen,this.toggleTimePicker(!1),this.$element.find(".model-holder").width("1px"),this.activeDate=this.bsDateValue?this.bsDateValue:new Date,this.bsDateValue||this.hightlightToday(),this.addDatepickerKeyboardEvents(this,!0),Object(r.R)($("bs-datepicker-container"),this.nativeElement,this.bsDatePickerDirective._datepicker)}onModelUpdate(t,e){if("date"===e&&(this.invalidDateTimeFormat=!1,Object(r.nb)(this.datePipe,t,this.dateInputFormat)===this.displayValue&&$(this.nativeElement).find(".display-input").val(this.displayValue)),this.minDateMaxDateValidationOnInput(t),!t)return this.bsDateValue=this.bsTimeValue=this.proxyModel=this.bsDateValue&&this.bsTimePicker&&(""===this.bsTimePicker.hours||""===this.bsTimePicker.minutes||""===this.bsTimePicker.seconds)?moment(this.bsDateValue).startOf("day").toDate():void 0,void((t!==this.datavalue||!this.datavalue&&this.prevDatavalue)&&this._debouncedOnChange(this.datavalue,{},!0));"date"===e&&this.isDateOpen&&this.toggleTimePicker(!0),this.proxyModel=t,this.proxyModel&&(this.bsDateValue=this.bsTimeValue=this.proxyModel),this._debouncedOnChange(this.datavalue,{},!0),this.cdRef.detectChanges()}preventTpClose(t){t.stopImmediatePropagation()}toggleDpDropdown(t,e=!1){this.loadNativeDateInput?e||this.onDateTimeInputFocus():("click"===t.type&&(this.invokeEventCallback("click",{$event:t}),this.focusOnInputEl()),t.target&&$(t.target).is("input")&&!this.isDropDownDisplayEnabledOnInput(this.showdropdownon)?t.stopPropagation():(this.bsDatePickerDirective.toggle(),this.addBodyClickListener(this.bsDatePickerDirective.isOpen)))}addBodyClickListener(t){if(!t)return;const e=document.querySelector("body");setTimeout(()=>{const t=e.querySelector(`.${this.dateContainerCls}`);this.deregisterDatepickerEventListener=Object(r.P)(e,t,this.nativeElement,"click",this.isDropDownDisplayEnabledOnInput(this.showdropdownon),()=>{this.bsDatePickerDirective.hide()},0,!0)},350)}hideDatepickerDropdown(){this.isDateOpen=!1,this.invokeOnTouched(),this.bsDatePickerDirective.hide(),this.bsDateValue&&this.toggleTimePicker(!0),this.isEnterPressedOnDateInput=!1,this.deregisterDatepickerEventListener&&this.deregisterDatepickerEventListener();const t=$(this.nativeElement).closest(".app-composite-widget.caption-floating");t.length>0&&this.app.notify("captionPositionAnimate",{displayVal:this.displayValue,nativeEl:t})}onDateChange(t,e){if(this.isEnterPressedOnDateInput)return void(this.isEnterPressedOnDateInput=!1);let i=t.target.value.trim();i=i?Object(r.ob)(i,{pattern:this.loadNativeDateInput?this.outputformat:this.datepattern,meridians:this.meridians,isNativePicker:this.loadNativeDateInput}):void 0,this.formatValidation(i,t.target.value,e)&&(e&&this.minDateMaxDateValidationOnInput(i,t,this.displayValue,e)||(this.invalidDateTimeFormat=!1,this.onModelUpdate(i)))}onDisplayKeydown(t){if(this.isDropDownDisplayEnabledOnInput(this.showdropdownon)){t.stopPropagation();let e=t.target.value.trim();const i=this.keyEventPlugin.constructor.getEventFullKey(t);if("enter"===i||"arrowdown"===i){e=e?Object(r.ob)(e,{pattern:this.loadNativeDateInput?this.outputformat:this.datepattern,meridians:this.meridians}):void 0,t.preventDefault();const i=Object(r.nb)(this.datePipe,e,this.dateInputFormat),s=t.target.value.trim();s&&"timestamp"===this.datepattern?_.isNaN(s)||_.parseInt(s)===i||(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,t,!1)):s&&s!==i?(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,t,!1)):(this.invalidDateTimeFormat=!1,this.isEnterPressedOnDateInput=!0,this.bsDatePickerDirective.bsValue=e),this.toggleDpDropdown(t)}else this.hideDatepickerDropdown(),this.hideTimepickerDropdown()}else this.hideDatepickerDropdown(),this.hideTimepickerDropdown()}isValid(t){if(!t){const t=$(this.nativeElement).find("input").val(),e=Object(r.ob)(t,{pattern:this.loadNativeDateInput?this.outputformat:this.datepattern,meridians:this.meridians,isNativePicker:this.loadNativeDateInput});if(!this.formatValidation(e,t))return}}handleEvent(t,e,i,s){_.includes(["blur","focus","change","click"],e)||super.handleEvent(t,e,i,s)}onInputBlur(t){$(t.relatedTarget).hasClass("current-date")||(this.invokeOnTouched(),this.invokeEventCallback("blur",{$event:t}))}}return t.initializeProps=(Object(o.Rb)("wm-datetime",v),Object(o.Sb)(r.B.DATETIME,new Map(v)),void Object(o.Sb)(r.B.TIMESTAMP,new Map(v))),t})();const g=new Map([["autofocus",o.C],["class",o.E],["dataentrymode",Object.assign({value:"default"},o.E)],["datavaluesource",o.B],["datavalue",o.E],["disabled",o.C],["hint",o.E],["hourstep",Object.assign({value:1},o.D)],["maxtime",o.E],["mintime",o.E],["minutestep",Object.assign({value:15},o.D)],["name",o.E],["outputformat",Object.assign({value:"HH:mm:ss"},o.E)],["placeholder",Object.assign({value:"Select time"},o.E)],["readonly",o.C],["required",o.C],["shortcutkey",o.E],["show",Object.assign({value:!0},o.C)],["showdropdownon",Object.assign({value:"default"},o.E)],["showcustompicker",Object.assign({value:!1},o.C)],["secondsstep",Object.assign({value:1},o.D)],["tabindex",Object.assign({value:0},o.D)],["timepattern",o.E],["timestamp",o.E]]),y={widgetType:"wm-time",hostClass:"input-group app-timeinput"};let f=(()=>{class t extends c{constructor(t,e,i,s,a){super(t,y),this.ngZone=e,this.appDefaults=i,this.status={isopen:!1},this.keyEventPlugin=a[1],Object(o.Ub)(this.nativeElement,this),this.registerDestroyListener(()=>this.clearTimeInterval()),this.timepattern=this.appDefaults.timeFormat||Object(r.kb)(r.B.TIME),this.updateFormat("timepattern"),this.app=s}get timestamp(){return this.bsTimeValue?this.bsTimeValue.valueOf():void 0}get datavalue(){return this.isCurrentTime&&!this.bsTimeValue?"CURRENT_TIME":Object(r.nb)(this.datePipe,this.bsTimeValue,this.outputformat)||""}set datavalue(t){t?"CURRENT_TIME"===t?(this.isCurrentTime=!0,this.setTimeInterval()):(this.clearTimeInterval(),this.bsTimeValue=Object(r.ob)(t,{pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput}),this.isCurrentTime=!1,this.mintimeMaxtimeValidation()):(this.bsTimeValue=void 0,this.clearTimeInterval(),this.isCurrentTime=!1),this.invokeOnChange(this.datavalue),Object(r.a)()}get displayValue(){return Object(r.nb)(this.datePipe,this.bsTimeValue,this.timepattern)||""}get nativeDisplayValue(){return Object(r.nb)(this.datePipe,this.bsTimeValue,"HH:mm:ss")||""}onPropertyChange(t,e,i){"tabindex"!==t&&("timepattern"===t&&this.updateFormat("timepattern"),"mintime"===t?(this.minTime=Object(r.ob)(e,{pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput}),this.mintimeMaxtimeValidation()):"maxtime"===t?(this.maxTime=Object(r.ob)(e,{pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput}),this.mintimeMaxtimeValidation()):super.onPropertyChange(t,e,i))}setValidateType(t,e,i){this.timeNotInRange&&(i<t?this.validateType="mintime":i>e&&(this.validateType="maxtime"))}mintimeMaxtimeValidation(){this.timeNotInRange=this.minTime&&this.maxTime&&(this.bsTimeValue<this.minTime||this.bsTimeValue>this.maxTime),this.setValidateType(this.minTime,this.maxTime,this.bsTimeValue),this.invokeOnChange(this.datavalue,void 0,!1)}toggleDropdown(t,e=!1){this.loadNativeDateInput?e||this.onDateTimeInputFocus():("click"===t.type&&(this.invokeEventCallback("click",{$event:t}),this.focusOnInputEl()),t.target&&$(t.target).is("input")&&!this.isDropDownDisplayEnabledOnInput(this.showdropdownon)||(this.ngZone.run(()=>{this.status.isopen=!this.status.isopen}),this.addBodyClickListener(this.status.isopen)))}preventTpClose(t){t.stopImmediatePropagation();const e=$(this.nativeElement).closest(".app-composite-widget.caption-floating");e.length>0&&this.app.notify("captionPositionAnimate",{displayVal:this.displayValue,nativeEl:e})}addBodyClickListener(t){if(!t)return;const e=document.querySelector("body");setTimeout(()=>{const t=$(e).find(">bs-dropdown-container .dropdown-menu").get(0);this.deregisterEventListener=Object(r.P)(e,t,this.nativeElement,"click",this.isDropDownDisplayEnabledOnInput(this.showdropdownon),()=>{this.status.isopen=!1},0,!0)},350)}onDisplayKeydown(t){if(this.isDropDownDisplayEnabledOnInput(this.showdropdownon)){t.stopPropagation();const e=this.keyEventPlugin.constructor.getEventFullKey(t);"enter"===e||"arrowdown"===e?(t.preventDefault(),this.toggleDropdown(t)):this.hideTimepickerDropdown()}else this.hideTimepickerDropdown()}onDisplayTimeChange(t){const e=Object(r.ob)(t.target.value,{meridians:this.meridians,pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput});this.formatValidation(e,t.target.value)&&(this.invalidDateTimeFormat=!1,this.onTimeChange(e))}onInputBlur(t){$(t.relatedTarget).hasClass("bs-timepicker-field")||(this.invokeOnTouched(),this.invokeEventCallback("blur",{$event:t}))}onTimeChange(t,e){let i,s,a,n;e&&(t=Object(r.ob)(t.target.value,{pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput})),t?(this.bsTimeValue=t,this.timeNotInRange=this.minTime&&this.maxTime&&(t<this.minTime||t>this.maxTime),this.setValidateType(this.minTime,this.maxTime,t)):(this.bsTimePicker&&this.bsTimePicker.min&&this.bsTimePicker.max&&(a=moment(new Date(this.bsTimePicker.min)).format("A"),n=moment(new Date(this.bsTimePicker.max)).format("A"),i=this.bsTimePicker.hours+":"+(this.bsTimePicker.minutes||0)+":"+(this.bsTimePicker.seconds||0)+(this.bsTimePicker.showMeridian?" "+a:""),s=Object(r.ob)(i,{pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput}),this.bsTimePicker.meridian=a,this.timeNotInRange=this.bsTimePicker.min>s||this.bsTimePicker.max<s,this.setValidateType(this.bsTimePicker.min,this.bsTimePicker.max,s)),this.bsTimeValue=s),this.invokeOnTouched(),this.invokeOnChange(this.datavalue,{},!0)}setTimeInterval(){this.timeinterval||(this.timeinterval=setInterval(()=>{const t=new Date;t.setSeconds(t.getSeconds()+1),this.datavalue="CURRENT_TIME",this.onTimeChange(t)},1e3))}clearTimeInterval(){this.timeinterval&&(clearInterval(this.timeinterval),this.timeinterval=null)}setIsTimeOpen(t){this.status.isopen=t}handleEvent(t,e,i,s){_.includes(["blur","focus","change","click"],e)||super.handleEvent(t,e,i,s)}hideTimepickerDropdown(){this.invokeOnTouched(),this.status.isopen=!1,this.deregisterEventListener&&this.deregisterEventListener(),this.removeKeyupListener();const t=$(this.nativeElement).closest(".app-composite-widget.caption-floating");t.length>0&&this.app.notify("captionPositionAnimate",{displayVal:this.displayValue,nativeEl:t})}isValid(t){if(!t){const t=$(this.nativeElement).find("input").val(),e=Object(r.ob)(t,{meridians:this.meridians,pattern:this.loadNativeDateInput?this.outputformat:void 0,isNativePicker:this.loadNativeDateInput});if(!this.formatValidation(e,t))return}}onShown(){const t=document.querySelectorAll("timepicker");_.forEach(t,t=>{Object(r.O)(t.parentElement,"app-datetime",!0)}),this.focusTimePickerPopover(this),this.bindTimePickerKeyboardEvents(),Object(r.R)($("bs-dropdown-container"),this.nativeElement,this.bsDropdown._dropdown,$("bs-dropdown-container .dropdown-menu"))}assignModel(){this.displayInputElem||(this.displayInputElem=this.getMobileInput()),this.displayInputElem.value=_.get(this,"nativeDisplayValue")}}return t.initializeProps=(Object(o.Rb)("wm-time",g),void Object(o.Sb)(r.B.TIME,new Map(g))),t})();class O{}}}]);